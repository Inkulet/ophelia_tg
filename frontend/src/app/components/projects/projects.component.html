<section class="section-container">
  <h2 class="section-title">Проекты</h2>

  <p class="state-text" *ngIf="loading">Загружаем проекты...</p>
  <p class="state-text error" *ngIf="!loading && error">{{ error }}</p>
  <p class="state-text" *ngIf="!loading && !error && projects.length === 0">
    Проекты пока не добавлены.
  </p>

  <div class="projects-grid" *ngIf="!loading && !error && projects.length > 0">
    <article class="project-card" *ngFor="let project of projects" (click)="openProject(project)">
      <img
        *ngIf="project.mediaURL"
        [src]="mediaUrl(project.mediaURL)"
        [alt]="project.title"
        loading="lazy"
      />
      <h3>{{ project.title }}</h3>
      <p>{{ project.shortDescription }}</p>
    </article>
  </div>
</section>

<div class="modal-overlay" *ngIf="selectedProject" (click)="closeProject()">
  <article class="modal-card" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="closeProject()">×</button>
    <img
      *ngIf="selectedProject?.mediaURL"
      [src]="mediaUrl(selectedProject?.mediaURL ?? '')"
      [alt]="selectedProject?.title"
      loading="lazy"
    />
    <h3>{{ selectedProject?.title }}</h3>
    <p class="short">{{ selectedProject?.shortDescription }}</p>
    <p class="details">{{ selectedProject?.detailedContent }}</p>
  </article>
</div>
